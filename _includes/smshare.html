<div id="share-bar">
    <p class="share-heading">
        {% if page.lang == "en" %}
            Share the post:
        {% elsif page.lang == "az" %}
            Mətni paylaşın:
        {% endif %}
    </p>

    <div class="share-buttons">
        <a class="horizontal-share-buttons" href="https://www.facebook.com/sharer/sharer.php?u={{ page.url | absolute_url }}" target="_blank" title="Share on Facebook">
            <i class="fab fa-facebook"></i>
        </a>
        <a class="horizontal-share-buttons" href="https://twitter.com/intent/tweet?url={{ page.url | absolute_url }}&text={{ page.title | url_encode }}" target="_blank" title="Share on X">
            <i class="fab fa-x-twitter"></i>
        </a>
        <a class="horizontal-share-buttons" href="https://www.linkedin.com/shareArticle?mini=true&url={{ page.url | absolute_url }}&title={{ page.title | url_encode }}" target="_blank" title="Share on LinkedIn">
            <i class="fab fa-linkedin"></i>
        </a>
        <a class="horizontal-share-buttons" href="https://telegram.me/share/url?url={{ page.url | absolute_url }}&text={{ page.title | url_encode }}" target="_blank" title="Share on Telegram">
            <i class="fab fa-telegram-plane"></i>
        </a>
        <a class="horizontal-share-buttons" href="https://api.whatsapp.com/send?text={{ page.title | url_encode }}%20{{ page.url | absolute_url }}" target="_blank" title="Share on WhatsApp">
            <i class="fab fa-whatsapp"></i>
        </a>

        <button type="button" class="horizontal-share-buttons copy-link" id="copy-link-btn" onclick="copyLink()" title="Copy link" aria-label="Copy link">
            <i class="fas fa-copy" id="copy-link-icon" aria-hidden="true"></i>
        </button>
    </div>
</div>

<style>
    .copy-link {
        padding: 0;
        margin: 0;
    }
    .share-heading {
        font-size: 1em;
        font-weight: bold;
    }

    #share-bar {
        margin-top: 50px;
        text-align: center;
    }

    .share-buttons {
        display: flex;
        gap: 8px;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
    }

    .share-buttons a, .share-buttons button {
        text-decoration: none;
        font-size: 1.3em;
        color: #40546a;
        transition: transform 0.2s ease, color 0.2s ease;
        background: none;
        border: none;
        cursor: pointer;
    }

    .share-buttons a:hover, .share-buttons button:hover {
        color: #6186ad;
    }
    .copy-link.copied {
        color: #2e7d32;
    }
    .copy-link.copied:hover {
        color: #2e7d32;
    }
</style>

<script>
    function copyLink() {
        var url = window.location.href;
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(url).then(showCopiedState);
        } else {
            var textarea = document.createElement("textarea");
            textarea.value = url;
            textarea.setAttribute("readonly", "");
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand("copy");
                showCopiedState();
            } finally {
                document.body.removeChild(textarea);
            }
        }
    }
    function showCopiedState() {
        var btn = document.getElementById("copy-link-btn");
        var icon = document.getElementById("copy-link-icon");
        if (!btn || !icon) return;
        icon.className = "fas fa-check";
        btn.classList.add("copied");
        btn.title = "Copied!";
        btn.setAttribute("aria-label", "Copied!");
        setTimeout(function() {
            icon.className = "fas fa-copy";
            btn.classList.remove("copied");
            btn.title = "Copy link";
            btn.setAttribute("aria-label", "Copy link");
        }, 1800);
    }
</script>
